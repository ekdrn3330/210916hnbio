<!DOCTYPE html>
  <html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta property="og:image" content="/img/m-hnbio-favi.png">
    

    <link rel="shortcut icon" href="/img/footer-logo.png">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="/public/css/all.css">
    <title>list</title>
  </head>
  <body>
    <%- include('piece/nav.ejs') %>

    <div class="container" style="
    text-align:center;
    display:flex;
    flex-direction:column;
    align-items:center;
    ">
    <h2 class="font-weight-bold text-center mb-5">게시글 리스트</h2>

      <table class="table">
        <tr>
          <th scope="col">#</th>
          <th scope="col">제목</th>
          <th scope="col">조회수</th>
          <th scope="col">등록일</th>
        </tr>
        <%
        for(var i = (page * page_num) - page_num; i < (page * page_num); i++) {
        if(i > length){
            i++;
        }else{
            var data = posts[i]
        %>
        <tr class="detail_href" onClick="detail_href(<%= data.id %>)">
          <td><%= posts.length - i %></td>
          <td><%- data.title %></td>
          <td><%= data.views %></td>
          <td><%= data.date %></td>
        </tr>
        <% }
        }
        %>
      </table>
      <nav aria-label="Page navigation example">
        <ul class="pagination pagination-sm">
          
          <%
          for(var j = 0; j < posts.length / page_num; j++){
          %>
          <li class="page-item"><a class="page-link" href="/list/<%= j + 1 %>"><%= j + 1 %></a></li>
          <%
          }
          %>
        </ul>
      </nav>
        

    </div>
    
      
  

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script>

      function detail_href(x) {
        window.location.href = '/detail/' + x;
      };

      $('.page-item').eq(<%= page - 1 %>).addClass('active');

    </script>
  </body>
</html>