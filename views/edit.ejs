<!doctype html>
<html lang="ko">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta property="og:image" content="/img/m-hnbio-favi.png">
    

    <link rel="shortcut icon" href="/img/footer-logo.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css" rel="stylesheet">
    <style>
      .note-editor .note-editable {
        line-height:1.0;
      }
      .note-editor.note-frame .note-placeholder {
        padding:5px 10px;
      }
    </style>

    <title>edit</title>
  </head>
  <body>
    <%- include('piece/nav.ejs') %>
      
    <div class="container">
      <h2 class="font-weight-bold text-center">게시글 수정</h2>

        <form action="/add/<%= data.id %>?_method=PUT" method="POST">
            <div class="form-group">
                <label>제목</label>
                <input type="text" class="form-control" name="title" value="<%- data.title %>">
            </div>
            <div class="form-group">
              <textarea id="summernote" name="editordata"><%= data.editordata %></textarea>
            </div>
            <button type="submit" class="btn btn-outline-secondary">Submit</button>
        </form> 
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>
    <script>
      $(function() {

        $('#summernote').summernote({
            height: 400,                 // 에디터 높이
            minHeight: null,             // 최소 높이
            maxHeight: null,             // 최대 높이
            focus: true,                  // 에디터 로딩후 포커스를 맞출지 여부
            lang: "ko-KR",					// 한글 설정
            placeholder: '최대 2048자까지 쓸 수 있습니다',	//placeholder 설정
            toolbar: [
              // [groupName, [list of button]]
              ['fontname', ['fontname']],
              ['fontsize', ['fontsize']],
              ['style', ['bold', 'italic', 'underline','strikethrough', 'clear']],
              ['color', ['forecolor','color']],
              ['table', ['table']],
              ['para', ['ul', 'ol', 'paragraph']],
              ['height', ['height']],
              ['insert',['picture','link','video']],
              ['view', ['fullscreen', 'help']]
            ],
            fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New','맑은 고딕','궁서','굴림체','굴림','돋움체','바탕체'],
            fontSizes: ['8','9','10','11','12','14','16','18','20','22','24','28','30','36','50','72'],
            lineHeights: ['0.2', '0.3', '0.4', '0.5', '0.6', '0.8', '1.0', '1.2', '1.4', '1.5', '2.0', '3.0'],
            // callbacks: {
            //   onImageUpload: function(files, editor, welEditable) {
            //     sendFile(files[0], editor, welEditable);
            //   }
            // }
        });

        // function sendFile(file,editor,welEditable) {
        //     data = new FormData();
        //     data.append("file", file);
        //     $.ajax({
        //         data: data,
        //         type: "POST",
        //         url: "/imageUpload",
        //         enctype: 'multipart/form-data',
        //         cache: false,
        //         contentType: false,
        //         processData: false,
        //         success: function(response) {
        //             if (response.error){
        //                 alert('에러가 발생했습니다. ' + response.error);
        //             } else {
        //                 $('#summernote').summernote('insertImage', response.url);
        //             }
        //         }
        //     });
        // }
      });

      $('.btn-outline-secondary').click(function() {
        if($('.form-control').val().trim() == '') {
          alert('제목과 본문을 입력하세요.');
          return false;
        }
        if($('#summernote').val().trim() == '') {
          alert('제목과 본문을 입력하세요.');
          return false;
        }
      });

    </script>
  </body>
</html>